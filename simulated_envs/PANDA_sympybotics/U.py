# Copyright (C) 2024 Mitsubishi Electric Research Laboratories (MERL)
#
# SPDX-License-Identifier: AGPL-3.0-or-later
import math
from math import cos, sin


def U(q):
    q1 = q[0]
    q2 = q[1]
    q3 = q[2]
    q4 = q[3]
    q5 = q[4]
    q6 = q[5]
    q7 = q[6]

    x0 = sin(q2)
    x1 = cos(q2)
    x2 = x0 * sin(q3)
    x3 = x0 * cos(q3)
    x4 = sin(q4)
    x5 = x1 * x4
    x6 = cos(q4)
    x7 = x1 * x6
    x8 = sin(q5)
    x9 = x2 * x8
    x10 = cos(q5)
    x11 = x10 * x2
    x12 = x3 * x4
    x13 = x3 * x6
    x14 = sin(q6)
    x15 = x12 + x7
    x16 = x14 * x15
    x17 = cos(q6)
    x18 = -x13 + x5
    x19 = x18 * x8
    x20 = x10 * x18
    x21 = x20 + x9
    x22 = x17 * x21
    x23 = sin(q7)
    x24 = -x11 + x19
    x25 = cos(q7)
    x26 = x16 + x22

    return (
        0.01993386669246 * x0
        + 30.4535758268527 * x1
        + 0.66581089427925 * x11
        + 16.8799056608454 * x12
        + 4.8076874943165 * x13
        + 0.67524884163189 * x14 * x21
        - 0.67524884163189 * x15 * x17
        + 1.61833169193795 * x16
        - 0.66581089427925 * x19
        + 0.27690780075318 * x2
        - 0.14375311619778 * x20
        + 1.61833169193795 * x22
        + 0.07588510661394 * x23 * x24
        + 0.03068018192664 * x23 * x26
        - 0.03068018192664 * x24 * x25
        + 0.07588510661394 * x25 * x26
        - 6.71158958634432 * x3
        - 4.8076874943165 * x5
        + 16.8799056608454 * x7
        - 0.14375311619778 * x9
        + 43.93722671136
    )
